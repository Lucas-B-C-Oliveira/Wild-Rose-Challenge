{"version":3,"sources":["GameManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameManager extends cc.Component {\r\n  @property(cc.Node)\r\n  machine = null;\r\n\r\n  @property({ type: cc.AudioClip })\r\n  audioClick = null;\r\n\r\n  private block = false;\r\n\r\n  private result = null;\r\n\r\n  public luck = 0;\r\n  \r\n  public randomLine0 = 0\r\n  public randomLine1 = 0;\r\n  public randomLine2 = 0;\r\n\r\n  start(): void {\r\n    this.machine.getComponent('Machine').createMachine();\r\n  }\r\n\r\n  update(): void {\r\n    if (this.block && this.result != null) {\r\n      this.informStop();\r\n      this.result = null;\r\n    }\r\n  }\r\n\r\n  click(): void {\r\n    cc.audioEngine.playEffect(this.audioClick, false);\r\n\r\n    if (this.machine.getComponent('Machine').spinning === false) {\r\n      this.block = false;\r\n      this.machine.getComponent('Machine').spin();\r\n      this.requestResult();\r\n    } else if (!this.block) {\r\n      this.block = true;\r\n      this.machine.getComponent('Machine').lock();\r\n    }\r\n  }\r\n\r\n\r\n  async requestResult(): Promise<void> {\r\n    this.result = null;\r\n    this.result = await this.getAnswer();\r\n  }\r\n\r\n  getAnswer(): Promise<Array<Array<number>>> {\r\n    var slotResult = [];\r\n    return new Promise<Array<Array<number>>>(resolve => {\r\n      setTimeout(() => {\r\n\r\n        this.luck = Math.floor(Math.random() * 100) + 1\r\n        var r = Math.floor(Math.random() * 30); // r is Random Tiles\r\n        var a = Math.floor(Math.random() * 30); // a is Random Tiles\r\n        var n = Math.floor(Math.random() * 30); // n is Random Tiles\r\n\r\n        this.randomLine0 = a; \r\n        this.randomLine1 = r;\r\n        this.randomLine2 = n;\r\n\r\n        if (this.luck > 93){\r\n\r\n          // 7% of the time all lines should show equal tiles.\r\n          cc.log(\"7% of the time all lines should show equal tiles.\");\r\n\r\n          slotResult = [ \r\n            [1, 2, 3, 4, 5],\r\n            [1, 2, 3, 4, 5], \r\n            [1, 2, 3, 4, 5],\r\n            [1, 2, 3, 4, 5], \r\n            [1, 2, 3, 4, 5]  ];\r\n\r\n            for(let row = 0; row < 5; row += 1){ // Lines \r\n\r\n              for(let column = 0; column < 5; column += 1){ // Columns\r\n\r\n                var auxRandom = Math.floor(Math.random() * 30)\r\n\r\n                var column1Check = (row == 0 && column == 1) || (row == 2 && column == 1) || (row == 4 && column == 1)\r\n                var column3Check = (row == 1 && column == 3) || (row == 3 && column == 3);\r\n\r\n                var column2Check = (row == 0 && column == 2) || (row == 2 && column == 2) || (row == 4 && column == 2)\r\n                var column4Check = (row == 1 && column == 4) || (row == 3 && column == 4);\r\n\r\n                var column0Check = (row == 0 && column == 0) || (row == 2 && column == 0) || (row == 4 && column == 0)\r\n                var column2nCheck = (row == 1 && column == 2) || (row == 3 && column == 2);\r\n\r\n                var allColsFalse = ((!column1Check && !column3Check) && (!column2Check && !column4Check) && (!column0Check && !column2nCheck))\r\n\r\n                if(column1Check) // Line 1 - Mid\r\n                  slotResult[row][column] = r;\r\n\r\n                else if(column3Check) // Line 1 - Mid \r\n                  slotResult[row][column] = r;\r\n\r\n                else if(column2Check) // Line 2 - Bot\r\n                  slotResult[row][column] = a;\r\n\r\n                else if(column4Check) // Line 2 - Bot\r\n                  slotResult[row][column] = a;\r\n                \r\n                else if(column0Check) // Line 0 - Top\r\n                  slotResult[row][column] = n;\r\n                \r\n                else if(column2nCheck) // Line 0 - Top\r\n                  slotResult[row][column] = n;\r\n                \r\n                else if((allColsFalse && auxRandom == r) || (allColsFalse && auxRandom == a) || (allColsFalse && auxRandom == n)){\r\n                  \r\n                  while(auxRandom == r || auxRandom == a || auxRandom == n){\r\n\r\n                    auxRandom = Math.floor(Math.random() * 30);\r\n\r\n                    if(auxRandom != r && auxRandom != a && auxRandom != n){\r\n                      slotResult[row][column] = auxRandom;\r\n                      break;\r\n                    }\r\n\r\n                  }\r\n                }\r\n                else if(allColsFalse && auxRandom != r && auxRandom != a && auxRandom != n)\r\n                  slotResult[row][column] = auxRandom;\r\n                \r\n              }\r\n\r\n            }\r\n        }\r\n        else if (this.luck > 83 && this.luck <= 93){\r\n\r\n          // 10% of the time it should display two lines of equal tiles.\r\n          cc.log(\"10% of the time it should display two lines of equal tiles.\");\r\n          this.randomLine2 = 100;\r\n\r\n          slotResult = [ \r\n            [1, 2, 3, 4, 5],\r\n            [1, 2, 3, 4, 5], \r\n            [1, 2, 3, 4, 5],\r\n            [1, 2, 3, 4, 5], \r\n            [1, 2, 3, 4, 5]  ];\r\n\r\n            for(let row = 0; row < 5; row += 1){ // Lines \r\n\r\n              for(let column = 0; column < 5; column += 1){ // Columns\r\n\r\n                var auxRandom = Math.floor(Math.random() * 30)\r\n\r\n                var column1Check = (row == 0 && column == 1) || (row == 2 && column == 1) || (row == 4 && column == 1)\r\n                var column3Check = (row == 1 && column == 3) || (row == 3 && column == 3);\r\n\r\n                var column2Check = (row == 0 && column == 2) || (row == 2 && column == 2) || (row == 4 && column == 2)\r\n                var column4Check = (row == 1 && column == 4) || (row == 3 && column == 4);\r\n\r\n                var allColsFalse = ((!column1Check && !column3Check) && (!column2Check && !column4Check))\r\n\r\n                if(column1Check) // Line 1 - Mid\r\n                  slotResult[row][column] = r;\r\n                \r\n                else if(column3Check) // Line 1 - Mid\r\n                  slotResult[row][column] = r;\r\n                \r\n                else if(column2Check) // Line 2 - Bot\r\n                  slotResult[row][column] = a;\r\n\r\n                else if(column4Check) // Line 2 - Bot\r\n                  slotResult[row][column] = a;\r\n                \r\n                else if((allColsFalse && auxRandom == r) || (allColsFalse && auxRandom == a) ){\r\n                  \r\n                  while(auxRandom == r || auxRandom == a){\r\n\r\n                    auxRandom = Math.floor(Math.random() * 30);\r\n\r\n                    if(auxRandom != r && auxRandom != a){\r\n                      slotResult[row][column] = auxRandom;\r\n                      break;\r\n                    }\r\n\r\n                  }\r\n                }\r\n                else if(allColsFalse && auxRandom != r && auxRandom != a) \r\n                  slotResult[row][column] = auxRandom;\r\n\r\n              }\r\n\r\n            }\r\n        }\r\n        else if (this.luck > 50 && this.luck <= 83){\r\n\r\n          // 33% of the time it should display a single line of equal tiles.\r\n          cc.log(\"33% of the time it should display a single line of equal tiles.\");\r\n\r\n          this.randomLine0 = 100; \r\n          this.randomLine2 = 100;\r\n\r\n          slotResult = [ \r\n            [1, 2, 3, 4, 5],\r\n            [1, 2, 3, 4, 5], \r\n            [1, 2, 3, 4, 5],\r\n            [1, 2, 3, 4, 5], \r\n            [1, 2, 3, 4, 5]  ];\r\n\r\n            for(let row = 0; row < 5; row += 1){ // Lines \r\n\r\n              for(let column = 0; column < 5; column += 1){ // Columns\r\n\r\n                var auxRandom = Math.floor(Math.random() * 30)\r\n\r\n                var column1Check = (row == 0 && column == 1) || (row == 2 && column == 1) || (row == 4 && column == 1)\r\n                var column3Check = (row == 1 && column == 3) || (row == 3 && column == 3);\r\n\r\n                if(column1Check)\r\n                  slotResult[row][column] = r;\r\n                \r\n                else if(column3Check)\r\n                  slotResult[row][column] = r;\r\n                \r\n                else if(!column1Check && !column3Check && auxRandom == r){\r\n                  \r\n                  while(auxRandom == r){\r\n\r\n                    auxRandom = Math.floor(Math.random() * 30);\r\n\r\n                    if(auxRandom != r){\r\n                      slotResult[row][column] = auxRandom;\r\n                      break;\r\n                    }\r\n\r\n                  }\r\n                }\r\n                else if(!column1Check && !column3Check && auxRandom != r) \r\n                  slotResult[row][column] = auxRandom;\r\n                  \r\n              }\r\n\r\n            }\r\n        }\r\n        else if (this.luck <= 50){\r\n\r\n          // 50% of the time it should return this random configuration of tiles.\r\n          cc.log(\"50% of the time it should return this random configuration of tiles.\");\r\n\r\n          slotResult = [ \r\n          [Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30)],\r\n          [Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30)], \r\n          [Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30)],\r\n          [Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30)], \r\n          [Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30), Math.floor(Math.random() * 30)]  ];\r\n\r\n          this.randomLine0 = 100; \r\n          this.randomLine1 = 100;\r\n          this.randomLine2 = 100;\r\n\r\n        }\r\n\r\n\r\n        resolve(slotResult);\r\n      }, 1000 + 500 * Math.random());\r\n    });\r\n  }\r\n\r\n  informStop(): void {\r\n    const resultRelayed = this.result;\r\n    this.machine.getComponent('Machine').stop(resultRelayed);\r\n  }\r\n}\r\n"]}